sudo: required

language: java

services:
        - docker

env:
        - DOCKER_COMPOSE_VERSION=1.8.0

addons: # get google-chrome-stable
  chrome: stable

before_install:
        - sudo rm /usr/local/bin/docker-compose
        - curl -L https://github.com/docker/compose/releases/download/${DOCKER_COMPOSE_VERSION}/docker-compose-`uname -s`-`uname -m` > docker-compose
        - chmod +x docker-compose
        - sudo mv docker-compose /usr/local/bin
        - docker-compose --version
        - docker-compose build
        - docker-compose up -d
        - docker ps -a
        - cd ./bevrand.intregrationtest
        - pwd
        - wget -N http://chromedriver.storage.googleapis.com/2.30/chromedriver_linux64.zip -P ~/
         - unzip ~/chromedriver_linux64.zip -d ~/
         - rm ~/chromedriver_linux64.zip
         - sudo mv -f ~/chromedriver /usr/local/share/
         - sudo chmod +x /usr/local/share/chromedriver
         - sudo ln -s /usr/local/share/chromedriver /usr/local/bin/chromedriver

script:
        - whereis google-chrome-stable
        - whereis chromedriver
        - ./gradlew test
